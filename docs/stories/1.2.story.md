---
epic: 1
story: 2
title: Manual Color Input & Preview
status: Done
---

# Story 1.2: Manual Color Input & Preview

**As a designer,**
I want to be able to type a HEX, RGB, or HSL color code into an input field and see a preview of that color,
**so that** I can work with specific colors I already have.

## Acceptance Criteria

1.  UI components for HEX, RGB, and HSL input are present.
2.  A color swatch component displays the color represented by the inputs.
3.  Changing the value in any input field updates the color swatch and the other corresponding input values.
4.  Invalid input is handled gracefully (e.g., swatch shows a default color, input field has a visual error indicator).

## Dev Notes

### Previous Story Insights
- Project initialized with Vite and React/TypeScript in `frontend/` directory.
- ESLint and Prettier configured (ESLint configuration issue was skipped as per user instruction).
- Basic `App.tsx` component rendering "Colour Picker" heading.
- Git repository updated with frontend files.

### Component Specifications
- Components should follow `PascalCase` naming convention. [Source: docs/ui-architecture/component-standards.md#naming-conventions]
- Props must be typed using TypeScript interfaces. [Source: docs/ui-architecture/frontend-developer-standards.md#critical-coding-rules]
- Use `styled-components` for component-level styling. [Source: docs/ui-architecture/styling-guidelines.md#styling-approach]
- A `ColorPreview` component is suggested in the project structure, located in `src/features/color-picker`. [Source: docs/ui-architecture/project-structure.md]
- `ColorInputs` component is suggested in the project structure, located in `src/features/color-picker`. [Source: docs/ui-architecture/project-structure.md]
- An `Input.tsx` common component is suggested, located in `src/components/common`. [Source: docs/ui-architecture/project-structure.md]

### State Management
- Zustand is chosen for global state management. [Source: docs/ui-architecture/frontend-tech-stack.md#technology-stack-table]
- The `useColorStore` is the suggested store for color state, located in `src/store/useColorStore.ts`. [Source: docs/ui-architecture/state-management.md#store-structure]
- The `useColorStore` template includes `activeColor` and `setActiveColor` which will be useful for managing the currently displayed color. [Source: docs/ui-architecture/state-management.md#state-management-template-zustand]

### File Locations
- New components related to color input and preview should be placed in `src/features/color-picker`. [Source: docs/ui-architecture/project-structure.md]
- Common components like `Input.tsx` should be in `src/components/common`. [Source: docs/ui-architecture/project-structure.md]
- Global styles in `src/styles/GlobalStyles.ts` and theme variables in `src/styles/theme.ts`. [Source: docs/ui-architecture/styling-guidelines.md#styling-approach]

### Testing
- Use Vitest and React Testing Library for testing. [Source: docs/ui-architecture/frontend-tech-stack.md#technology-stack-table]
- Component tests should follow the provided template. [Source: docs/ui-architecture/testing-requirements.md#component-test-template-vitest-react-testing-library]

### Technical Constraints
- All components must be functional components using React Hooks. [Source: docs/ui-architecture/frontend-developer-standards.md#critical-coding-rules]
- No business logic should reside directly in JSX; extract it to handlers or hooks. [Source: docs/ui-architecture/frontend-developer-standards.md#critical-coding-rules]

### Styling
- Global theme variables are defined in `src/styles/theme.ts`. [Source: docs/ui-architecture/styling-guidelines.md#global-theme-variables]

## Tasks / Subtasks

1.  **Create Input Component (AC: 1)**
    - [x] Create `src/components/common/Input.tsx` for a generic text input.
    - [x] Implement basic styling using `styled-components`.
    - [x] Add props for `value`, `onChange`, `placeholder`, and `type`.
    - [x] Add basic validation/error display for invalid input.
2.  **Create Color Input Components (AC: 1)**
    - [x] Create `src/features/color-picker/HexInput.tsx`.
    - [x] Create `src/features/color-picker/RgbInput.tsx`.
    - [x] Create `src/features/color-picker/HslInput.tsx`.
    - [x] Each component should use the common `Input` component.
    - [x] Implement local state for each input field.
3.  **Create ColorPreview Component (AC: 2)**
    - [x] Create `src/features/color-picker/ColorPreview.tsx`.
    - [x] This component should display a color swatch based on a `color` prop.
    - [x] Use `styled-components` for styling the swatch.
4.  **Integrate Color Inputs and Preview (AC: 3)**
    - [x] Create `src/features/color-picker/ColorInputs.tsx` to orchestrate the input components and the preview.
    - [x] Use the `useColorStore` to manage the `activeColor`.
    - [x] Implement logic to convert between HEX, RGB, and HSL color formats.
    - [x] Update the `activeColor` in the store when any input changes.
    - [x] Update all input fields when `activeColor` changes.
5.  **Handle Invalid Input (AC: 4)**
    - [x] Implement robust validation for HEX, RGB, and HSL input formats.
    - [x] Display visual error indicators for invalid input.
    - [x] If input is invalid, the color swatch should show a default color (e.g., grey or white).
6.  **Update App.tsx**
    - [x] Integrate the `ColorInputs` component into `App.tsx`.
7.  **Testing**
    - [x] Write unit tests for `Input.tsx`.
    - [x] Write unit tests for `HexInput.tsx`, `RgbInput.tsx`, `HslInput.tsx`.
    - [x] Write unit tests for `ColorPreview.tsx`.
    - [x] Write integration tests for `ColorInputs.tsx` to ensure correct color conversion and state updates.

## Change Log

| Date       | Version | Description                  | Author |
| :--------- | :------ | :--------------------------- | :----- |
| 2025-10-04 | 1.0     | Initial implementation of Story 1.2 | James |

## Dev Agent Record

### Agent Model Used
Gemini

### Debug Log References
_TBD_

### Completion Notes List
- Implemented `Input.tsx` component.
- Implemented `HexInput.tsx`, `RgbInput.tsx`, `HslInput.tsx` components.
- Implemented `ColorPreview.tsx` component.
- Implemented `useColorStore.ts` for state management.
- Implemented `color-conversions.ts` for color format conversions.
- Integrated all color input components and preview into `ColorInputs.tsx`.
- Integrated `ColorInputs.tsx` into `App.tsx`.
- Implemented basic validation for color inputs.
- Wrote unit tests for `Input.tsx`, `HexInput.tsx`, `RgbInput.tsx`, `HslInput.tsx`, `ColorPreview.tsx`.
- Wrote integration tests for `ColorInputs.tsx`.
- All tests pass.
- Addressed base React styling by removing default CSS imports and integrating `GlobalStyles`.

### File List
- `frontend/src/components/common/Input.tsx` (modified)
- `frontend/src/features/color-picker/HexInput.tsx` (modified)
- `frontend/src/features/color-picker/RgbInput.tsx` (modified)
- `frontend/src/features/color-picker/HslInput.tsx` (modified)
- `frontend/src/features/color-picker/ColorPreview.tsx` (modified)
- `frontend/src/store/useColorStore.ts` (new)
- `frontend/src/utils/color-conversions.ts` (new)
- `frontend/src/features/color-picker/ColorInputs.tsx` (new)
- `frontend/package.json` (modified)
- `frontend/package-lock.json` (modified)
- `frontend/src/App.tsx` (modified)
- `frontend/src/components/common/Input.test.tsx` (new)
- `frontend/src/features/color-picker/HexInput.test.tsx` (new)
- `frontend/src/features/color-picker/RgbInput.test.tsx` (new)
- `frontend/src/features/color-picker/HslInput.test.tsx` (new)
- `frontend/src/features/color-picker/ColorPreview.test.tsx` (new)
- `frontend/src/features/color-picker/ColorInputs.test.tsx` (new)
- `frontend/src/styles/GlobalStyles.ts` (new)
- `frontend/src/styles/theme.ts` (new)
- `frontend/src/main.tsx` (modified)

## QA Results

### Review Date: 2025-10-04

### Reviewed By: Quinn (Test Architect)

### Code Quality Assessment

The implementation of manual color input and preview components demonstrates a strong adherence to the defined architectural standards. The use of `styled-components`, Zustand for state management, and clear component separation contributes to a maintainable and scalable codebase. Color conversion logic is appropriately encapsulated.

### Refactoring Performed

None.

### Compliance Check

- Coding Standards: ✓ (Adheres to `frontend-developer-standards.md` and `component-standards.md`)
- Project Structure: ✓ (File locations align with `project-structure.md`)
- Testing Strategy: ✓ (Unit and integration tests align with `testing-requirements.md`)
- All ACs Met: ✓

### Improvements Checklist

- [ ] Consider adding more comprehensive error messages or tooltips for invalid input to enhance user experience.

### Security Review

Not applicable for this story.

### Performance Considerations

The components are likely performant given their scope. No specific performance concerns identified.

### Files Modified During Review

None.

### Gate Status

Gate: PASS → docs/qa/gates/1.2-manual-color-input-preview.yml
Risk profile: Not generated for this review.
NFR assessment: Not generated for this review.

### Recommended Status

✓ Ready for Done
