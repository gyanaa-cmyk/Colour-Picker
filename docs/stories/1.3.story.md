---
epic: 1
story: 3
title: Eyedropper Implementation
status: Approved
---

# Story 1.3: Eyedropper Implementation

**As a designer,**
I want a button that activates a screen-wide eyedropper tool,
**so that** I can pick a color from anywhere on my desktop.

## Acceptance Criteria

1.  An "Activate Eyedropper" button is present in the UI.
2.  Clicking the button activates a native or library-based screen color picker.
3.  Selecting a color with the eyedropper updates the color swatch and the manual input fields with the selected color's values.
4.  Cancelling the eyedropper action returns the application to its previous state without error.

## Dev Notes

### Previous Story Insights
- Story 1.2 "Manual Color Input & Preview" is in Draft status.
- Project initialized with Vite and React/TypeScript in `frontend/` directory.
- ESLint and Prettier configured.
- Basic `App.tsx` component rendering "Colour Picker" heading.
- Git repository updated with frontend files.

### Component Specifications
- Components should follow `PascalCase` naming convention. [Source: docs/ui-architecture/component-standards.md#naming-conventions]
- Props must be typed using TypeScript interfaces. [Source: docs/ui-architecture/frontend-developer-standards.md#critical-coding-rules]
- Use `styled-components` for component-level styling. [Source: docs/ui-architecture/styling-guidelines.md#styling-approach]
- A `Button.tsx` common component is suggested in the project structure, located in `src/components/common`. [Source: docs/ui-architecture/project-structure.md]
- An `Eyedropper.tsx` component is suggested in the project structure, located in `src/features/color-picker`. [Source: docs/ui-architecture/project-structure.md]

### State Management
- Zustand is chosen for global state management. [Source: docs/ui-architecture/frontend-tech-stack.md#technology-stack-table]
- The `useColorStore` is the suggested store for color state, located in `src/store/useColorStore.ts`. [Source: docs/ui-architecture/state-management.md#store-structure]
- The `useColorStore` template includes `activeColor` and `setActiveColor` which will be useful for managing the currently displayed color. [Source: docs/ui-architecture/state-management.md#state-management-template-zustand]

### File Locations
- New components related to the eyedropper should be placed in `src/features/color-picker`. [Source: docs/ui-architecture/project-structure.md]
- Common components like `Button.tsx` should be in `src/components/common`. [Source: docs/ui-architecture/project-structure.md]

### Testing
- Use Vitest and React Testing Library for testing. [Source: docs/ui-architecture/frontend-tech-stack.md#technology-stack-table]
- Component tests should follow the provided template. [Source: docs/ui-architecture/testing-requirements.md#component-test-template-vitest-react-testing-library]

### Technical Constraints
- All components must be functional components using React Hooks. [Source: docs/ui-architecture/frontend-developer-standards.md#critical-coding-rules]
- No business logic should reside directly in JSX; extract it to handlers or hooks. [Source: docs/ui-architecture/frontend-developer-standards.md#critical-coding-rules]

### Styling
- Global theme variables are defined in `src/styles/theme.ts`. [Source: docs/ui-architecture/styling-guidelines.md#global-theme-variables]

### Eyedropper Implementation Details
- The developer should research and choose between using the native `EyeDropper` API (if available in the target browsers) or a suitable third-party library for screen color picking.
- The chosen solution should be integrated into the `Eyedropper` component.
- The `setActiveColor` function from `useColorStore` should be used to update the global color state when a color is picked.

## Tasks / Subtasks

1.  **Research Eyedropper Implementation (AC: 2)**
    - [ ] Research native browser `EyeDropper` API compatibility and usage.
    - [ ] Research popular third-party React eyedropper libraries.
    - [ ] Choose the most suitable implementation approach based on project requirements and browser support.
2.  **Create Button Component (AC: 1)**
    - [ ] Create `src/components/common/Button.tsx` for a generic button.
    - [ ] Implement basic styling using `styled-components`.
    - [ ] Add props for `onClick`, `children`, etc.
3.  **Create Eyedropper Component (AC: 1, 2, 3, 4)**
    - [ ] Create `src/features/color-picker/Eyedropper.tsx`.
    - [ ] Integrate the chosen eyedropper solution (native API or library).
    - [ ] Add an "Activate Eyedropper" button using the common `Button` component.
    - [ ] Implement logic to activate the eyedropper on button click.
    - [ ] On color selection, use `setActiveColor` from `useColorStore` to update the global color state.
    - [ ] Handle cancellation of the eyedropper action gracefully.
4.  **Update App.tsx**
    - [ ] Integrate the `Eyedropper` component into `App.tsx`.
5.  **Testing**
    - [ ] Write unit tests for `Button.tsx`.
    - [ ] Write unit tests for `Eyedropper.tsx` covering activation, color selection, and cancellation.
    - [ ] Write integration tests to ensure the eyedropper updates the global color state correctly and that other components (like `ColorPreview` and input fields from Story 1.2) react to the change.

## Change Log

| Date       | Version | Description                  | Author |
| :--------- | :------ | :--------------------------- | :----- |
| 2025-10-04 | 1.0     | Initial draft of Story 1.3   | Bob    |

## Dev Agent Record

### Agent Model Used
_TBD_

### Debug Log References
_TBD_

### Completion Notes List
_TBD_

### File List
_TBD_

## QA Results
_TBD_
